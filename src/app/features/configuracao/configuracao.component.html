<div class="artigos-header text-center my-4">
  <div class="icon-circle mx-auto">
    <i class="bi bi-gear"></i>
  </div>
   <h3>Configurações Gerais</h3>

</div>
 <div class="container-fluid">


    <!-- Abas -->
<nav class="tabs mb-3">
  <div class="tabs-wrapper">
    <div class="tab-background" [ngStyle]="{ left: indicatorLeft, width: indicatorWidth }"></div>

    <a #tab
       class="tab-link"
       [class.active]="aba === 'configuracao'"
       (click)="selecionarAba('configuracao', $event)">
      <i class="bi bi-buildings"></i> Configuracões Gerais
    </a>

    <a #tab
       class="tab-link"
       [class.active]="aba === 'subscribe'"
       (click)="selecionarAba('subscribe', $event)">
      <i class="bi bi-box-arrow-in-right"></i> Subscrição
    </a>

    <a #tab
       class="tab-link"
       [class.active]="aba === 'contas'"
       (click)="selecionarAba('contas', $event)">
      <i class="bi bi-bank2"></i> Contas
    </a>

    <a #tab
       class="tab-link"
       [class.active]="aba === 'ajuda'"
       (click)="selecionarAba('ajuda', $event)">
      <i class="bi bi-question-circle"></i> Como usar o Nextech
    </a>

    <a #tab
       class="tab-link"
       [class.active]="aba === 'tutoriais'"
       (click)="selecionarAba('tutoriais', $event)">
      <i class="bi bi-play-circle"></i> Tutoriais
    </a>

    <a #tab
       class="tab-link"
       [class.active]="aba === 'termos'"
       (click)="selecionarAba('termos', $event)">
      <i class="bi bi-file-earmark-text"></i> Termos de uso
    </a>
  </div>
</nav>



    <section [ngSwitch]="aba" class="container-card">
      <div *ngSwitchCase="'configuracao'" class="configuracao-container">
    <form [formGroup]="form" (ngSubmit)="salvarEmpresa()" class="form-wrapper">

      <!-- Campo de upload de logo -->
  <div class="form-field">
    <label for="logo" class="form-label-custom">Logo da Empresa</label>
    <input
      type="file"
      id="logo"
      accept="image/*"
      (change)="onFileSelected($event)"
    />
    <div *ngIf="fileError" class="error-message">
      {{ fileError }}
    </div>
    <!-- Opcional: mostrar preview -->
    <div *ngIf="previewUrl" class="preview-wrapper">
      <p>Pré-visualização:</p>
      <img [src]="previewUrl" alt="Preview da logo" style="max-width: 200px; max-height: 200px;" />
    </div>
  </div>

  <div *ngFor="let field of fields" class="form-field">
    <label [for]="field.id" class="form-label-custom">{{ field.label }}</label>

    <div *ngIf="field.name === 'telefone'; else inputNormal" class="input-wrapper">
      <span class="prefix">
        <img src="https://flagcdn.com/w20/ao.png" alt="Angola" width="20" height="15" />
        &nbsp;+244
      </span>
      <input
        [id]="field.id"
        [type]="field.type"
        class="form-input"
        [formControlName]="field.name"
        [placeholder]="field.placeholder"
        maxlength="9"
      />
    </div>

    <ng-template #inputNormal>
      <input
        [id]="field.id"
        [type]="field.type"
        class="form-input"
        [formControlName]="field.name"
        [placeholder]="field.placeholder"
      />
    </ng-template>

    <div *ngIf="isInvalid(field.name)" class="error-message">
      {{ field.error }}
    </div>
  </div>

  <button type="submit" class="submit-btn" [disabled]="form.invalid">Salvar</button>
</form>


  <div class="dados-atuais" *ngIf="empresa">
  <h3>Dados atuais</h3>
  <div class="dado">
   <span *ngIf="empresa?.logoURL; else semLogo">
  <img [src]="empresa.logoURL" alt="Logo da empresa" style="max-width: 120px; max-height: 120px;" />
</span>
<ng-template #semLogo>
  <p>Sem logo cadastrada.</p>
</ng-template>


  </div>
  <div class="dado"><strong>Nome:</strong> <span>{{ empresa.nome }}</span></div>
  <div class="dado"><strong>NIF:</strong> <span>{{ empresa.nif }}</span></div>
  <div class="dado"><strong>Telefone:</strong> <span>{{ empresa.telefone }}</span></div>
  <div class="dado"><strong>Email:</strong> <span>{{ empresa.email }}</span></div>
  <div class="dado"><strong>Endereço:</strong> <span>{{ empresa.endereco }}</span></div>
</div>

        </div>




      <div *ngSwitchCase="'subscribe'">
      <div class="subscription-container">
  <h2>Subscrição</h2>
  <p class="description">
    Para ativar sua subscrição, selecione um pacote
    e realize o pagamento via referência bancária no
    ATM ou plataformas digitais como Multicaixa Express.
  </p>

  <div class="packages">
    <div class="package-card">
      <h3>1 mês</h3>
      <p class="price">4.000,00KZ</p>
      <p class="plan-note">Plano Mensal</p>
      <button>Assinar por 1 mês</button>
    </div>

    <div class="package-card destaque">
      <h3>7 meses</h3>
      <p class="price">25.000,00KZ</p>
      <p class="plan-note">Plano Semestral</p>
      <button>Assinar por 7 meses</button>
    </div>

    <div class="package-card">
      <h3>12 meses</h3>
      <p class="price">45.000,00KZ</p>
      <p class="plan-note">Plano Anual</p>
      <button>Assinar por 12 meses</button>
    </div>
  </div>
</div>

      </div>

      <div *ngSwitchCase="'contas'">
        <div class="contas-wrapper">
          <div class="contas-top">
            <button type="button" class="" data-bs-toggle="modal" data-bs-target="#exampleModal">
    <i class="bi bi-bank2"></i> Nova Conta
  </button>
            <div class="img-box">
              <img src="assets/card.svg"/>
            </div>
            <div class="info-box">
              <div class="col">
                <p><strong>Banco</strong><br />Caixa</p>
                <p><strong>IBAN</strong><br />Caixa</p>
                <p><strong>Nº de Conta</strong><br />Caixa</p>
                <p><strong>Gestor de conta</strong><br />Caixa</p>
              </div>
              <div class="col">
                <p><strong>Endereço</strong></p>
                <p><strong>Telemóvel</strong></p>
                <p><strong>Email</strong></p>
              </div>
            </div>
          </div>

          <div class="tabs-wrapper">
            <nav class="tabs">
              <a class="active">Proformas</a>
              <a>Facturas</a>
              <a>Factura/Recibos</a>
              <a>Notas</a>
              <a>Recibos</a>
              <a>Despesas</a>
            </nav>

            <table class="tabela-contas">
              <thead>
                <tr>
                  <th><input type="checkbox" /></th>
                  <th>Nº</th>
                  <th>Entidade</th>
                  <th>Criado por</th>
                  <th>Data</th>
                  <th>Valor</th>
                  <th>Documento</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="7" style="text-align: center; padding: 2rem;">Nenhum dado disponível</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div *ngSwitchCase="'ajuda'">
        <div class="faq-container">
          <h2>Perguntas Frequentes</h2>
          <p class="intro">Estamos aqui para tirar todas as tuas dúvidas.</p>

          <div class="faq-item" *ngFor="let faq of faqs; let i = index" [class.open]="faq.open">
            <div class="question" (click)="toggleFaq(i)">
              {{ faq.question }}
              <span class="icon">+</span>
            </div>
            <div class="answer-wrapper">
              <div class="answer">{{ faq.answer }}</div>
            </div>
          </div>
        </div>
        </div>

      <div *ngSwitchCase="'tutoriais'"></div>
      <div *ngSwitchCase="'termos'">
        <div class="termos-container">
          <h2>Termos de Uso da Nextech</h2>
          <p>Leia atentamente os nossos termos e condições antes de usar os serviços da Nextech. Ao acessar ou usar nossos serviços, você concorda em cumprir os seguintes termos:</p>

          <h3>1. Introdução</h3>
          <p>Bem-vindo ao Nextech! Ao utilizar nossos serviços, você concorda com nossos termos e condições. Se não concordar, não poderá utilizar os serviços da Nextech. Caso tenha dúvidas, entre em contato conosco para esclarecimentos.</p>

          <h3>2. Pacotes e Subscrições</h3>
          <p>Os serviços da Nextech estão disponíveis por meio de planos de subscrição. Através de sua assinatura, você concorda em pagar pelos pacotes escolhidos e usar os serviços conforme descrito na nossa oferta.</p>

          <h3>3. Uso dos Serviços</h3>
          <p>Os serviços da Nextech podem ser acessados por assinantes e usuários convidados. Os assinantes são responsáveis pelo gerenciamento da conta e pelo controle de acesso aos serviços. O uso dos serviços é concedido enquanto a subscrição estiver ativa.</p>

          <h3>4. Pagamento e Renovação</h3>
          <p>O pagamento dos serviços é feito via referências bancárias, incluindo plataformas digitais e Multicaixa. O não pagamento pode resultar em perda temporária do acesso aos serviços, até que a renovação seja realizada.</p>

          <h3>5. Proteção de Dados</h3>
          <p>Tomamos todas as medidas necessárias para garantir que seus dados pessoais estejam protegidos. Usamos criptografia e backups regulares para garantir a segurança das informações.</p>

          <h3>6. Responsabilidades do Usuário</h3>
          <p>Ao usar nossos serviços, você se compromete a não violar nossas políticas e a seguir todas as leis e regulamentos aplicáveis. A Nextech não se responsabiliza por qualquer uso inadequado dos nossos serviços.</p>

          <h3>7. Modificações nos Termos</h3>
          <p>A Nextech se reserva o direito de modificar estes termos a qualquer momento. Caso haja alterações significativas, notificaremos os usuários por meio dos canais apropriados.</p>

          <h3>8. Suporte e Contato</h3>
          <p>Nosso suporte está disponível para dúvidas ou problemas relacionados aos nossos serviços. Entre em contato conosco pelo email, WhatsApp ou telefone.</p>
        </div>
      </div>

    </section>




<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg"> <!-- modal maior para melhor acomodar campos -->
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5">Criar Conta</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="position: static; background: none; box-shadow: none;"></button>
      </div>

      <div class="modal-body">
        <form [formGroup]="formConta" (ngSubmit)="salvarConta()">
        <!-- Campo Banco (select) -->
        <div class="mb-3">
          <label for="banco" class="form-label">Selecione o teu Banco <span class="text-danger">*</span></label>
          <select
            id="banco"
            name="banco"
            class="form-select"
            formControlName="banco"
            required
          >
            <option value="">Selecione...</option>
            <option value="BAI">Banco Angolano de Investimento</option>
            <option value="BIC">Banco BIC</option>
            <option value="YETU">Banco Yetu</option>
            <option value="SOL">Banco Sol</option>
            <option value="BNI">Banco de Negócios Internacional</option>
            <option value="BDA">Banco de Desenvolvimento de Angola</option>
            <option value="BCA">Banco Comercial Angolano, S.A</option>
            <option value="BCH">Banco Comercial do Huambo</option>
            <option value="BFA">Banco de Fomento Angola</option>
            <option value="BPC">Banco de Poupança e Crédito</option>
            <option value="BE">Banco Económico</option>
            <option value="BRK">Banco Regional do Keve</option>
            <option value="BIR">Banco de Investimento Rural</option>
            <option value="BMA">Banco Millennium Atlântico</option>
            <option value="BCS">Banco de Crédito do Sul, S.A.</option>
            <option value="VTB">Banco VTB África S.A.</option>
            <option value="FNB">Finibanco Angola, S.A</option>
            <option value="SBA">Standard Bank Angola</option>
            <option value="BCGA">Banco Caixa Geral Angola</option>
            <option value="BOCLB">Banco da China Lda - Sucursal de Luanda</option>
            <option value="BVB">Banco Valor S.A</option>
            <option value="BPG">Banco Prestígio</option>
            <option value="BMF">Banco BAI Micro Finanças S.A.</option>
            <option value="BCI">Banco de Comércio e Indústria</option>
          </select>
          <div class="text-danger" *ngIf="formConta.get('banco')?.touched && formConta.get('banco')?.invalid">
            O banco é obrigatório.
          </div>
        </div>

      <div class="mb-3">
  <label for="iban" class="form-label">IBAN</label>
  <div class="input-group">
    <span class="input-group-text">AO06</span>
    <input
      type="text"
      id="iban"
      class="form-control"
      formControlName="iban"
      placeholder="1234 5678 9012 3456 7890 1234"
      mask="0000 0000 0000 0000 0000 0000"
      maxlength="24"
      required
    />
  </div>
  <div class="text-danger" *ngIf="formConta.get('iban')?.touched && formConta.get('iban')?.invalid">
    O IBAN é obrigatório.
  </div>
</div>

        <!-- Número da conta com máscara numérica (exemplo: até 12 dígitos) -->
        <div class="mb-3">
          <label for="numeroConta" class="form-label">Nº de Conta</label>
          <input
            type="text"
            id="numeroConta"
            class="form-control"
            formControlName="numeroConta"
            placeholder="Digite o número da conta"
            mask="000000000000"
            maxlength="12"
            required
          />
          <div class="text-danger" *ngIf="formConta.get('numeroConta')?.touched && formConta.get('numeroConta')?.invalid">
            O número da conta é obrigatório.
          </div>
        </div>

        <div class="mb-3">
          <label for="titular" class="form-label">Titular</label>
          <input
            type="text"
            id="titular"
            class="form-control"
            formControlName="titular"
            placeholder="Nome do titular da conta"
            required
          />
          <div class="text-danger" *ngIf="formConta.get('titular')?.touched && formConta.get('titular')?.invalid">
            O titular é obrigatório.
          </div>
        </div>

        <div class="mb-3">
          <label for="gestorConta" class="form-label">Gestor de Conta</label>
          <input
            type="text"
            id="gestorConta"
            class="form-control"
            formControlName="gestorConta"
            placeholder="Nome do gestor da conta"
            required
          />
          <div class="text-danger" *ngIf="formConta.get('gestorConta')?.touched && formConta.get('gestorConta')?.invalid">
            O gestor de conta é obrigatório.
          </div>
        </div>

        <!-- Telefone com máscara para número angolano (9 dígitos) -->
        <div class="mb-3">
          <label for="telefone" class="form-label">Telemóvel (Contacto)</label>
          <input
            type="tel"
            id="telefone"
            class="form-control"
            formControlName="telefone"
            placeholder="923000000"
            mask="000000000"
            maxlength="9"
            required
          />
          <div class="text-danger" *ngIf="formConta.get('telefone')?.touched && formConta.get('telefone')?.invalid">
            O telemóvel é obrigatório.
          </div>
        </div>

        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <input
            type="email"
            id="email"
            class="form-control"
            formControlName="email"
            placeholder="Email"
            required
          />
          <div class="text-danger" *ngIf="formConta.get('email')?.touched && formConta.get('email')?.invalid">
            O email é obrigatório.
          </div>
        </div>

        <div class="mb-3">
          <label for="dependencia" class="form-label">Dependência</label>
          <input
            type="text"
            id="dependencia"
            class="form-control"
            formControlName="dependencia"
            placeholder="Dependência"
            required
          />
          <div class="text-danger" *ngIf="formConta.get('dependencia')?.touched && formConta.get('dependencia')?.invalid">
            A dependência é obrigatória.
          </div>
        </div>

        <div class="mb-3">
          <label for="endereco" class="form-label">Endereço</label>
          <input
            type="text"
            id="endereco"
            class="form-control"
            formControlName="endereco"
            placeholder="Endereço"
            required
          />
          <div class="text-danger" *ngIf="formConta.get('endereco')?.touched && formConta.get('endereco')?.invalid">
            O endereço é obrigatório.
          </div>
        </div>

        <div class="mb-3 form-check">
          <input
            type="checkbox"
            id="bancoPadrao"
            class="form-check-input"
            formControlName="bancoPadrao"
          />
          <label for="bancoPadrao" class="form-check-label">Banco Padrão</label>
        </div>

        <!-- Botão de salvar -->
        <div class="mb-3">
          <button type="submit" class="btn btn-success" [disabled]="loading">
            <span *ngIf="loading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            Salvar
          </button>
        </div>
      </form>
      </div>  </div>
    </div>
  </div>
</div>
